<h1 mat-dialog-title>
  <ng-container *ngIf="loaded; else loading">Dream has arrived.</ng-container>
</h1>
<ng-template #loading>Converting dream...</ng-template>
<div mat-dialog-content>
  <div [style.display]="loaded ? 'block' : 'none'">
    <div class="img-container">
      <img class="hidden" crossorigin="anonymous" #dream [src]="data.url">
      <canvas #canvas></canvas>
      <div class="buttons">
        <a mat-flat-button color="primary" [href]="imageObjectUrl"
           [download]="file?.name || data.filename">ダウンロード</a>
        <button mat-flat-button color="primary" ngfSelect accept="image/*"
                [(file)]="file" (fileChange)="onFileChange()">ブラウザ上で画像を重ねる ※</button>
      </div>
    </div>
    <div>
      ※
      選択したファイルはブラウザ上の画像処理で合成されます。
      アプリ作者など、第三者のサーバーへアップロードされることはありません。
    </div>
  </div>
  <mat-progress-bar *ngIf="!loaded" mode="indeterminate"></mat-progress-bar>
</div>
<div mat-dialog-actions>
  <span></span>
  <button mat-button [mat-dialog-close] cdkFocusInitial>CLOSE</button>
</div>
